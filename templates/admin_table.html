{% extends "base.html" %}

{% block content %}
<h1 class="text-center mb-4">Таблица: {{ table_name }}</h1>

<div class="mb-3 text-center">
    <a href="{{ url_for('add_entry', table_name=table_name) }}" class="btn btn-primary">Добавить запись</a>
</div>

{% if data %}
    <table class="table table-bordered table-hover">
        <thead>
            <tr>
                {% for column in data[0].keys() %}
                    <th>{{ column }}</th>
                {% endfor %}
                <th>Действия</th>
            </tr>
        </thead>
        <tbody>
            {% for row in data %}
                <tr>
                    {% for key, value in row.items() %}
                        <td>{{ value }}</td>
                    {% endfor %}
                    <td>
                        {% if primary_key_column and primary_key_column in row %}
                            <!-- Кнопка удаления -->
                            <form action="{{ url_for('delete_entry', table_name=table_name, entry_id=row[primary_key_column]) }}"
                                  method="POST" style="display:inline;">
                                <button type="submit" class="btn btn-danger btn-sm">Удалить</button>
                            </form>

                            <!-- Кнопка редактирования -->
                            <a href="{{ url_for('edit_entry', table_name=table_name, entry_id=row[primary_key_column]) }}"
                               class="btn btn-warning btn-sm">Редактировать</a>
                        {% else %}
                            <span class="text-muted">Удаление невозможно</span>
                        {% endif %}
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
{% else %}
    <p class="text-center">В таблице нет данных.</p>
{% endif %}

<div class="text-center mt-4">
    <a href="{{ url_for('admin_dashboard') }}" class="btn btn-secondary">Назад ко всем таблицам</a>
</div>
{% endblock %}
